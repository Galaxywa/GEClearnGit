<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="./css/02.css" />
</head>

<body>
    <div class="box">
        <div class="nav">
            <ul class="nav-list">

            </ul>
        </div>
        <div class="products">
            <ul class="products-list">


            </ul>
        </div>
    </div>


    <script src="./js/products.js"></script>
    <script src="./js/tabs.js"></script>
    <script>
        window.onload = function () {

            //默认激活第一个导航标签
            var activeIndex = 0;

            var navList = document.querySelector('.nav-list');

            //创建导航
            tabs.forEach(function (item, index) {
                // console.log('item ==> ', item);

                //创建li
                var li = document.createElement('li');

                //设置li的标签内容
                li.innerHTML = `
                <h4 class='fl'>${item.title}</h4>`;

                //设置data-type属性, 以便筛选数据
                li.dataset.type = item.type;

                //记录下标
                li.dataset.index = index;

                //追加激活类名
                if (activeIndex === index) {
                    li.classList.add('li-active');
                }

                //将li放在navList
                navList.appendChild(li);

            })

            //获取所有的ul.nav-list>li
            //父节点.querySelector(css选择器)
            //父节点.querySelectorAll(css选择器)
            var navListLis = navList.querySelectorAll('li');
            console.log('navListLis ==> ', navListLis);

            for (var i = 0; i < navListLis.length; i++) {
                navListLis[i].onclick = function () {
                    // console.log('this ==> ', this);

                    //获取当前li的data-index属性
                    var index = this.dataset.index;
                    // console.log('index ==> ', index);

                    if (activeIndex == index) {
                        console.log('点击相同的li');
                        return;
                    }

                    navListLis[activeIndex].classList.remove('li-active');

                    activeIndex = index;

                    //激活当前的li
                    this.classList.add('li-active');

                    //根据li的data-type属性获取数据
                    var type = this.dataset.type;
                    console.log('type ==> ', type);

                    var data = products[type];

                    createProduct(data);

                }
            }

            //初始化数据
            var initType = navListLis[activeIndex].dataset.type;
            console.log('initType ==> ', initType);
            createProduct(products[initType]);


            //生成数据
            function createProduct(data) {
                //data: 当前类型的数据, array
                // console.log('createProduct data ==> ', data);

                //获取ul.products-list
                var productsList = document.querySelector('.products-list');
                // console.log('productsList ==> ', productsList);

                productsList.innerHTML = '';

                //创建
                data.forEach(function (item) {

                    // console.log('createProduct item ==> ', item);

                    //创建li
                    var li = document.createElement('li');

                    //设置li的标签内容
                    li.innerHTML = `<div class="img">
            <img class="auto-img"
              src="${item.img}">
          </div>
          <p class="title">${item.title}</p>
          
           `;

                    productsList.appendChild(li);

                })

            }

        }
    </script>
</body>

</html>